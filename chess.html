<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chess Board - Play Now</title>
  <style>
body {
  font-family: Arial, sans-serif;
  background: #222;
  color: #fff;
  text-align: center;
  margin: 0;
  padding: 15px 8px;
  touch-action: manipulation;
}
    h1 { margin: 0 0 10px 0; }
    p { margin: 0 0 20px 0; }
 #board {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  width: 96vw;
  max-width: 460px;
  height: 96vw;
  max-height: 460px;
  margin: 15px auto;
  border: 10px solid #8B4513;
  border-radius: 10px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.6);
  aspect-ratio: 1 / 1;
}
.square {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10.8vw;
  cursor: pointer;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

@media (min-width: 500px) {
  .square { font-size: 46px; }
}
    .light { background: #f0d9b5; }
    .dark { background: #b58863; }
    .selected { background: #ffeb3b !important; }
    .possible { background: #4caf50 !important; opacity: 0.7; }
    #status { font-size: 18px; margin: 20px; }
    button {
      padding: 10px 20px;
      margin: 5px;
      background: #4caf50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
    }
    button:hover { background: #45a049; }
  </style>
</head>
<body>
  <h1>Chess Board</h1>
  <p>Click a piece, then click a square to move. Legal moves only.</p>

  <div id="white-captured" style="font-size:34px; margin:15px; min-height:50px; text-align:center;"></div>
  <div id="board"></div>
  <div id="black-captured" style="font-size:34px; margin:15px; min-height:50px; text-align:center;"></div>
  <div id="status">White to move</div>
 
  
  <button onclick="resetGame()">New Game</button>

  <script>
    const pieces = {
      'K': 'K', 'Q': 'Q', 'R': 'R', 'B': 'B', 'N': 'N', 'P': 'P',
      'k': 'k', 'q': 'q', 'r': 'r', 'b': 'b', 'n': 'n', 'p': 'p'
    };

    function createPiece(type) {
      return { type: type, kills: 0 };
    }

    let boardState = [
      ['r','n','b','q','k','b','n','r'].map(createPiece),
      ['p','p','p','p','p','p','p','p'].map(createPiece),
      [null,null,null,null,null,null,null,null],
      [null,null,null,null,null,null,null,null],
      [null,null,null,null,null,null,null,null],
      [null,null,null,null,null,null,null,null],
      ['P','P','P','P','P','P','P','P'].map(createPiece),
      ['R','N','B','Q','K','B','N','R'].map(createPiece)
    ];

    let selected = null;
    let turn = 'w';
    let whiteCaptured = [];
    let blackCaptured = [];

    const board = document.getElementById('board');

    function renderBoard() {
      board.innerHTML = '';
      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const square = document.createElement('div');
          square.className = `square ${(row + col) % 2 === 0 ? 'light' : 'dark'}`;
          square.dataset.row = row;
          square.dataset.col = col;

          const pieceObj = boardState[row][col];
          if (pieceObj) {
            const symbol = pieces[pieceObj.type];
            if (pieceObj.kills > 0) {
              square.innerHTML = symbol + `<sup style="color:red;font-size:18px;font-weight:bold;">${pieceObj.kills}</sup>`;
            } else {
              square.innerHTML = symbol;
            }
          }
          square.addEventListener('click', onSquareClick);
          board.appendChild(square);
        }
      }
    }

    function onSquareClick(e) {
      const row = parseInt(e.currentTarget.dataset.row);
      const col = parseInt(e.currentTarget.dataset.col);
      const piece = boardState[row][col];

      if (selected) {
        if (isLegalMove(selected.row, selected.col, row, col)) {
          const captured = boardState[row][col];
          const movingPiece = boardState[selected.row][selected.col];

          if (captured) {
            movingPiece.kills += 1;
            if (turn === 'w') blackCaptured.push(captured.type);
            else whiteCaptured.push(captured.type);
          }

          boardState[row][col] = movingPiece;
          boardState[selected.row][selected.col] = null;
          turn = turn === 'w' ? 'b' : 'w';
          selected = null;
          clearHighlights();
          renderBoard();
          updateCapturedDisplay();
          updateStatus();
        } else {
          selected = null;
          clearHighlights();
        }
      } else if (piece && ((turn === 'w' && piece.type === piece.type.toUpperCase()) || (turn === 'b' && piece.type === piece.type.toLowerCase()))) {
        selected = { row, col };
        highlightSquare(row, col, 'selected');
      }
    }

    function isLegalMove(fr, fc, tr, tc) {
      const p = boardState[fr][fc];
      if (!p) return false;
      const target = boardState[tr][tc];
      const isWhite = p.type === p.type.toUpperCase();
      const type = p.type.toLowerCase();

      if (target && ((isWhite && target.type === target.type.toUpperCase()) || (!isWhite && target.type === target.type.toLowerCase()))) return false;

      const rd = tr - fr;
      const cd = tc - fc;
      const ar = Math.abs(rd);
      const ac = Math.abs(cd);

      const clearPath = () => {
        const rs = rd === 0 ? 0 : rd/ar;
        const cs = cd === 0 ? 0 : cd/ac;
        let r = fr + rs;
        let c = fc + cs;
        while (r !== tr || c !== tc) {
          if (boardState[Math.round(r)][Math.round(c)]) return false;
          r += rs; c += cs;
        }
        return true;
      };

      if (type === 'p') {
        const dir = isWhite ? -1 : 1;
        if (cd === 0 && !target && tr === fr + dir) return true;
        if (cd === 0 && !target && tr === fr + 2*dir && ((isWhite && fr===6) || (!isWhite && fr===1)) && !boardState[fr+dir][fc]) return true;
        if (ac === 1 && tr === fr + dir && target) return true;
        return false;
      }
      if (type === 'r') return (rd===0 || cd===0) && clearPath();
      if (type === 'b') return ar===ac && clearPath();
      if (type === 'q') return (rd===0 || cd===0 || ar===ac) && clearPath();
      if (type === 'n') return (ar===2 && ac===1) || (ar===1 && ac===2);
      if (type === 'k') return ar <=1 && ac <=1;

      return false;
    }

    function highlightSquare(r, c, cls) {
      board.children[r*8 + c].classList.add(cls);
    }

    function clearHighlights() {
      [...board.children].forEach(sq => sq.classList.remove('selected', 'possible'));
    }

    function updateCapturedDisplay() {
      document.getElementById('white-captured').innerHTML = whiteCaptured.map(t => pieces[t.toUpperCase()]).join(' ');
      document.getElementById('black-captured').innerHTML = blackCaptured.map(t => pieces[t]).join(' ');
    }

    function updateStatus() {
      document.getElementById('status').textContent = (turn === 'w' ? 'White' : 'Black') + ' to move';
    }

    function resetGame() {
      boardState = [
        ['r','n','b','q','k','b','n','r'].map(createPiece),
        ['p','p','p','p','p','p','p','p'].map(createPiece),
        [null,null,null,null,null,null,null,null],
        [null,null,null,null,null,null,null,null],
        [null,null,null,null,null,null,null,null],
        [null,null,null,null,null,null,null,null],
        ['P','P','P','P','P','P','P','P'].map(createPiece),
        ['R','N','B','Q','K','B','N','R'].map(createPiece)
      ];
      selected = null;
      turn = 'w';
      whiteCaptured = [];
      blackCaptured = [];
      clearHighlights();
      renderBoard();
      updateCapturedDisplay();
      updateStatus();
    }

    // Start the game
    renderBoard();
    updateStatus();
    updateCapturedDisplay();
  </script>
</body>
</html>




